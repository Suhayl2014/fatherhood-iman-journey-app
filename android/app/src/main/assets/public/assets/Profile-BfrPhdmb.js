import{j as e}from"./ui-vendor-C7McgsY-.js";import{e as R,r as d}from"./react-vendor-BhqeUVA1.js";import{u as T,H as E,F as L,B,s as p,t as x}from"./index-BImgQHmp.js";import{I as Y}from"./input-DPPaCPuN.js";import{T as h}from"./textarea-dtvLoS-u.js";import{L as r}from"./label-D3kNmkFD.js";import{C as g,a as j,b as f,c as y,d as v}from"./card-DjuXh6RO.js";import{S as b,a as N,b as w,c as _,d as i}from"./select-DF03zH8V.js";import{C as A}from"./checkbox-C0wyMYmT.js";import{L as H,d as M,H as W,G as U}from"./icons-CbYejn_e.js";import"./index-CDHhSjWI.js";const K=[{id:"respect",label:"Respect"},{id:"kindness",label:"Kindness"},{id:"patience",label:"Patience"},{id:"honesty",label:"Honesty"},{id:"discipline",label:"Discipline"},{id:"responsibility",label:"Responsibility"},{id:"compassion",label:"Compassion"},{id:"integrity",label:"Integrity"},{id:"gratitude",label:"Gratitude"},{id:"humility",label:"Humility"},{id:"perseverance",label:"Perseverance"},{id:"mercy",label:"Mercy"},{id:"generosity",label:"Generosity"},{id:"taqwa",label:"Taqwa (God-consciousness)"},{id:"spirituality",label:"Spirituality"}],le=()=>{const{user:t}=T(),C=R(),[s,c]=d.useState(null),[V,S]=d.useState(!0),[P,F]=d.useState(!1),[k,I]=d.useState([]);d.useEffect(()=>{(async()=>{if(!t){C("/auth");return}try{S(!0);const{data:l,error:n}=await p.from("profiles").select("*").eq("id",t.id).single();if(n)if(n.code==="PGRST116"){const{data:u,error:q}=await p.from("profiles").insert([{id:t.id}]).select().single();if(q)throw q;c(u)}else throw n;else c(l),l?.parenting_values&&I(l.parenting_values)}catch(l){x({title:"Error loading profile",description:l.message,variant:"destructive"})}finally{S(!1)}})()},[t,C]);const o=a=>{const{name:l,value:n}=a.target;s&&c({...s,[l]:n})},m=(a,l)=>{s&&c({...s,[a]:l})},D=a=>{I(l=>{const n=l.includes(a)?l.filter(u=>u!==a):[...l,a];return s&&c({...s,parenting_values:n}),n})},G=async()=>{if(!(!t||!s))try{F(!0);const{error:a}=await p.from("profiles").update({full_name:s.full_name,bio:s.bio,parenting_style:s.parenting_style,parenting_values:k,challenges:s.challenges,goals:s.goals,support_network:s.support_network,islamic_education_priority:s.islamic_education_priority,religious_practices_frequency:s.religious_practices_frequency}).eq("id",t.id);if(a)throw a;x({title:"Profile updated",description:"Your profile has been successfully updated."})}catch(a){x({title:"Error updating profile",description:a.message,variant:"destructive"})}finally{F(!1)}};return V?e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(E,{}),e.jsx("main",{className:"flex-grow flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(H,{className:"h-10 w-10 animate-spin text-islamic-green mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading your profile..."})]})}),e.jsx(L,{})]}):e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(E,{}),e.jsx("main",{className:"flex-grow py-8",children:e.jsxs("div",{className:"container-app",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Your Profile"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Share your fatherhood journey and approach to Islamic parenting"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[e.jsxs(g,{children:[e.jsxs(j,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-islamic-green"}),"Basic Information"]}),e.jsx(y,{children:"Your personal information and brief bio"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"fullName",children:"Full Name"}),e.jsx(Y,{id:"fullName",name:"full_name",value:s?.full_name||"",onChange:o,placeholder:"Your full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"bio",children:"Bio"}),e.jsx(h,{id:"bio",name:"bio",value:s?.bio||"",onChange:o,placeholder:"Tell us a bit about yourself and your family",className:"min-h-[100px]"})]})]})]}),e.jsxs(g,{children:[e.jsxs(j,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-islamic-green"}),"Parenting Approach"]}),e.jsx(y,{children:"Your parenting style, values, challenges, and goals"})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"parentingStyle",children:"Parenting Style"}),e.jsxs(b,{value:s?.parenting_style||"",onValueChange:a=>m("parenting_style",a),children:[e.jsx(N,{children:e.jsx(w,{placeholder:"Select your parenting style"})}),e.jsxs(_,{children:[e.jsx(i,{value:"authoritative",children:"Authoritative - Balanced guidance and autonomy"}),e.jsx(i,{value:"authoritarian",children:"Authoritarian - Strong rules and discipline"}),e.jsx(i,{value:"permissive",children:"Permissive - Few rules, more freedom"}),e.jsx(i,{value:"uninvolved",children:"Uninvolved - Minimal engagement"}),e.jsx(i,{value:"attachment",children:"Attachment - Strong emotional bonds"}),e.jsx(i,{value:"positive",children:"Positive - Encouragement-focused"}),e.jsx(i,{value:"islamic",children:"Islamic - Following Islamic teachings"}),e.jsx(i,{value:"mixed",children:"Mixed - Combination of styles"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{children:"Parenting Values (select all that apply)"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:K.map(a=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{id:a.id,checked:k.includes(a.id),onCheckedChange:()=>D(a.id)}),e.jsx("label",{htmlFor:a.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:a.label})]},a.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"challenges",children:"Parenting Challenges"}),e.jsx(h,{id:"challenges",name:"challenges",value:s?.challenges||"",onChange:o,placeholder:"What challenges do you face as a parent?",className:"min-h-[80px]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"goals",children:"Parenting Goals"}),e.jsx(h,{id:"goals",name:"goals",value:s?.goals||"",onChange:o,placeholder:"What are your goals as a parent?",className:"min-h-[80px]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"supportNetwork",children:"Support Network"}),e.jsx(h,{id:"supportNetwork",name:"support_network",value:s?.support_network||"",onChange:o,placeholder:"Who supports you in your parenting journey? (Family, friends, community)",className:"min-h-[80px]"})]})]})]}),e.jsxs(g,{children:[e.jsxs(j,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-islamic-green"}),"Islamic Education & Practices"]}),e.jsx(y,{children:"Your approach to religious education and practices"})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"islamicEducationPriority",children:"Islamic Education Priority"}),e.jsxs(b,{value:s?.islamic_education_priority||"",onValueChange:a=>m("islamic_education_priority",a),children:[e.jsx(N,{children:e.jsx(w,{placeholder:"Select priority level"})}),e.jsxs(_,{children:[e.jsx(i,{value:"very_high",children:"Very High - Central to our family life"}),e.jsx(i,{value:"high",children:"High - Important but balanced with other priorities"}),e.jsx(i,{value:"moderate",children:"Moderate - Basic teaching with flexibility"}),e.jsx(i,{value:"low",children:"Low - Limited formal teaching"}),e.jsx(i,{value:"still_learning",children:"Still Learning - I'm developing my knowledge to teach"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"religiousPracticesFrequency",children:"Religious Practices Frequency"}),e.jsxs(b,{value:s?.religious_practices_frequency||"",onValueChange:a=>m("religious_practices_frequency",a),children:[e.jsx(N,{children:e.jsx(w,{placeholder:"Select frequency"})}),e.jsxs(_,{children:[e.jsx(i,{value:"daily",children:"Daily - Regular prayer and practices"}),e.jsx(i,{value:"weekly",children:"Weekly - Mainly on Fridays/weekends"}),e.jsx(i,{value:"occasional",children:"Occasional - During holidays and special occasions"}),e.jsx(i,{value:"rarely",children:"Rarely - Limited religious practice"}),e.jsx(i,{value:"developing",children:"Developing - Working on establishing regular practices"})]})]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(B,{onClick:G,disabled:P,className:"min-w-[150px]",children:P?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Profile"})})]})]})}),e.jsx(L,{})]})};export{le as default};
