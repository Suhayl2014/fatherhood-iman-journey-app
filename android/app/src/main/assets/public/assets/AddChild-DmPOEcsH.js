import{j as e}from"./ui-vendor-C7McgsY-.js";import{e as y,r as N}from"./react-vendor-BhqeUVA1.js";import{z as i,u as v}from"./form-vendor-BfT7G_Dv.js";import{F as S,a as d,b as o,c,d as m,f as h,e as x,t as w}from"./form-mLNjPGYL.js";import{u as F,H as C,B as g,F as B,t as u,s as A}from"./index-BImgQHmp.js";import{I as p}from"./input-DPPaCPuN.js";import{S as D,a as E,b as I,c as O,d as j}from"./select-DF03zH8V.js";import{A as V,a as _,h as k}from"./icons-CbYejn_e.js";import"./label-D3kNmkFD.js";import"./index-CDHhSjWI.js";const q=i.object({name:i.string().min(1,"Name is required"),dateOfBirth:i.string().refine(a=>new Date(a)<=new Date,{message:"Date of birth cannot be in the future"}),gender:i.enum(["male","female","other"],{required_error:"Please select a gender"})}),J=()=>{const{user:a}=F(),n=y(),[l,f]=N.useState(!1),r=v({resolver:w(q),defaultValues:{name:"",dateOfBirth:"",gender:void 0}}),b=async s=>{if(!a){u({title:"Authentication error",description:"You must be logged in to add a child",variant:"destructive"});return}f(!0);try{const{error:t}=await A.from("children").insert({name:s.name,date_of_birth:s.dateOfBirth,gender:s.gender,user_id:a.id});if(t)throw t;u({title:"Child added successfully",description:`${s.name} has been added to your family.`}),n("/dashboard")}catch(t){u({title:"Error adding child",description:t.message,variant:"destructive"})}finally{f(!1)}};return e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(C,{}),e.jsx("main",{className:"flex-grow py-8",children:e.jsxs("div",{className:"container-app max-w-3xl",children:[e.jsxs(g,{variant:"ghost",className:"mb-6",onClick:()=>n("/dashboard"),children:[e.jsx(V,{className:"mr-2 h-4 w-4"})," Back to Dashboard"]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-islamic-green/10 flex items-center justify-center",children:e.jsx(_,{className:"h-6 w-6 text-islamic-green"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Add a Child"}),e.jsx("p",{className:"text-gray-600",children:"Enter your child's information to begin tracking their milestones"})]})]}),e.jsx(S,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(b),className:"space-y-6",children:[e.jsx(d,{control:r.control,name:"name",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"Child's Name"}),e.jsx(m,{children:e.jsx(p,{placeholder:"Enter name",...s})}),e.jsx(h,{children:"Enter your child's full name"}),e.jsx(x,{})]})}),e.jsx(d,{control:r.control,name:"dateOfBirth",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"Date of Birth"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx(p,{type:"date",className:"pl-10",...s})]})}),e.jsx(h,{children:"Select your child's date of birth"}),e.jsx(x,{})]})}),e.jsx(d,{control:r.control,name:"gender",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"Gender"}),e.jsxs(D,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(m,{children:e.jsx(E,{children:e.jsx(I,{placeholder:"Select gender"})})}),e.jsxs(O,{children:[e.jsx(j,{value:"male",children:"Male"}),e.jsx(j,{value:"female",children:"Female"}),e.jsx(j,{value:"other",children:"Other"})]})]}),e.jsx(h,{children:"Select your child's gender"}),e.jsx(x,{})]})}),e.jsx("div",{className:"pt-4",children:e.jsx(g,{type:"submit",className:"w-full",disabled:l,children:l?"Adding...":"Add Child"})})]})})]})]})}),e.jsx(B,{})]})};export{J as default};
